[DEFAULT]
skip = mr_skip

# Mr actions
lib = 
	# Check whether to skip this action or not
	mr_skip() {
		{
			[ ! -z "$VCSH_REPO_NAME" ] && echo "WARNING: Mr is run from a VCSH repo !!!!"
		} ||
		{
			[ -r "$HOME/.mrskip" ] && {
				local MR_NAME="$(basename "${MR_REPO}" .git)"
				local HOSTNAME="$(uname -n)"
				grep -iE "^($HOSTNAME|):($MR_REPO|):($MR_NAME|):($MR_ACTION|)$" "$HOME/.mrskip" >/dev/null 2>&1; 
			}
		}
	}
	# Ask user something
	mr_ask() {
		local TEXT="$1"
		local REPLY=""
		shift
		read -p "${TEXT}${@:+ ($@)}: " REPLY
		if [ -z "$REPLY" ]; then
			REPLY="$@"
		fi
		echo "$REPLY"
	}

# Mr action shortcuts
lib = 
	annex_init() 		{ annex_cmd init "$@"; }
	annex_init_hubic() 	{ annex_cmd init_hubic "$@"; }
	annex_status() 		{ annex_cmd status "$@"; }
	annex_diff() 		{ annex_cmd diff "$@"; }
	annex_copy() 		{ annex_cmd copy "$@"; }
	annex_sync() 		{ annex_cmd sync "$@"; }
	annex_bundle() 		{ annex_cmd bundle "$@"; }
	vcsh_clone() 		{ vcsh_cmd clone "$@"; }
	git_pull() 			{ git_cmd pull "$@"; }
	git_push() 			{ git_cmd push "$@"; }
	git_bundle() 		{ git_cmd bundle "$@"; }
	git_meta() 			{ git_cmd meta "$@"; }

# Include our repositories
include = cat "${XDG_CONFIG_HOME:-$HOME/.config}/mr/config.d/"*
